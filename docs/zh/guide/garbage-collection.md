# 垃圾回收

## 概述

主体为基于`ARC`的垃圾回收。

## 引用计数

### 增加引用计数的时机

1. 赋值操作
2. 作为方法参数传递
3. 作为接收方法调用的对象
4. 作为方法返回值
5. 手动调用`Runtime.retain`方法

> [!NOTE]
> 使用`placement-new`时引用计数初始值为`1`，正常情况下为`0`

### 减少引用计数的时机

1. 变量销毁
2. 手动调用`Runtime.release`方法

> [!WARNING]
> 不要对`任何栈上对象`使用`Runtime.release`方法

### 回收时机

1. 引用计数为`0`
2. 手动使用`delete`运算符

> [!WARNING]
> 若要使用`delete`运算符，须保证`所有引用此对象的变量`必须为`Nullable Type`并手动置`null`,否则可能会引起`段错误`。