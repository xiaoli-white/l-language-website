# 字节码

## 概述
## 寄存器操作指令
### mov
移动`操作数1`的值到`操作数2`中。

## 算术指令

### 三操作数指令

`操作数1`: 源寄存器1(1 byte)

`操作数2`: 源寄存器2(1 byte)

`操作数3`: 目标寄存器(1 byte)

#### add

将`操作数1`与`操作数2`相加，结果存储在`操作数3`中。

#### sub

将`操作数1`与`操作数2`相减，结果存储在`操作数3`中。

#### mul

将`操作数1`与`操作数2`相乘，结果存储在`操作数3`中。

#### div

将`操作数1`与`操作数2`相除，结果存储在`操作数3`中。

#### mod

将`操作数1`与`操作数2`取余，结果存储在`操作数3`中。

#### and

将`操作数1`与`操作数2`按位与，结果存储在`操作数3`中。

#### or

将`操作数1`与`操作数2`按位或，结果存储在`操作数3`中。

#### xor

将`操作数1`与`操作数2`按位异或，结果存储在`操作数3`中。

#### shl

将`操作数1`左移`操作数2`位，结果存储在`操作数3`中。

#### shr

将`操作数1`右移`操作数2`位，结果存储在`操作数3`中。

#### ushr

将`操作数1`无符号右移`操作数2`位，结果存储在`操作数3`中。

### 双操作数指令

`操作数1`: 源寄存器(1 byte)

`操作数2`: 目标寄存器(1 byte)

#### not

将`操作数1`按位取反，结果存储在`操作数2`中。

#### neg

将`操作数1`取反，结果存储在`操作数2`中。

### 单操作数指令

`操作数`: 寄存器(1 byte)

#### inc

将`操作数`的值加1，结果存储在`操作数`中。

#### dec

将`操作数`的值减1，结果存储在`操作数`中。

## 原子算数指令

## 比较指令

### cmp

比较两个寄存器中的值，将结果存储在`flags`寄存器的`CMP`位。

`操作数1`: 源寄存器1(1 byte)

`操作数2`: 源寄存器2(1 byte)

`有符号`比较:
| 状态 | `flags`寄存器的`ZERO`位 | `flags`寄存器的`CARRY`位 |
| :---: | :---: | :---: |
| `操作数1`=`操作数2` | 1 | 0 |
| `操作数1`<`操作数2` | 0 | 1 |
| `操作数1`>`操作数2` | 0 | 0 |

`无符号`比较:
| 状态 | `flags`寄存器的`ZERO`位 | `flags`寄存器的`UNSIGNED`位 |
| :---: | :---: | :---: |
| `操作数1`=`操作数2` | 1 | 0 |
| `操作数1`<`操作数2` | 0 | 1 |
| `操作数1`>`操作数2` | 0 | 0 |

### atomic_cmp

比较`操作数1`所指向的`内存地址`的值与`操作数2`的值进行比较，将结果存储在`flags`寄存器的`CMP`位。

`操作数1`: 源寄存器1，存储一个内存地址(1 byte)

`操作数2`: 源寄存器2，存储一个值(1 byte)

结果同`cmp`指令。

## 跳转指令

### 无条件跳转指令

#### jump

`操作数`: 寄存器，存储目标地址(1 byte)

#### jump_immediate

`操作数`: 立即数，作为目标地址(8 bytes)

#### invoke

将`下一条指令`的`内存地址`入栈，并跳转到`操作数`所指向的地址。

`操作数`: 寄存器，存储目标地址(1 byte)

#### invoke_immediate

将`下一条指令`的`内存地址`入栈，并跳转到`操作数`所指向的地址。

`操作数`: 立即数，作为目标地址(8 bytes)

#### return

将`栈顶`的`内存地址`出栈，并跳转到该地址。

此指令无操作数。

### 条件跳转指令

`操作数`: 寄存器，存储目标地址(1 byte)

#### je

当`flags`寄存器的`ZERO`位为1时跳转

#### jne

当`flags`寄存器的`ZERO`位为0时跳转

#### jl

当`flags`寄存器的`ZERO`位为0且`CARRY`位为1时跳转

#### jle

当`flags`寄存器的`ZERO`位为1或`CARRY`位为1时跳转

#### jg

当`flags`寄存器的`ZERO`位为0且`CARRY`位为0时跳转

#### jge

当`flags`寄存器的`ZERO`位为1或`CARRY`位为0时跳转

#### jul

当`flags`寄存器的`ZERO`位为0且`UNSIGNED`位为1时跳转

#### jule

当`flags`寄存器的`ZERO`位为1或`UNSIGNED`位为1时跳转

#### jug

当`flags`寄存器的`ZERO`位为0且`UNSIGNED`位为0时跳转

#### juge

当`flags`寄存器的`ZERO`位为1或`UNSIGNED`位为0时跳转